!function(e){function l(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function c(){r=null,t.last&&(t.el.trigger("longTap"),t={})}function f(){r&&clearTimeout(r),r=null}function p(){n&&clearTimeout(n),i&&clearTimeout(i),o&&clearTimeout(o),r&&clearTimeout(r),n=i=o=r=null,t={}}function s(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function g(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var n,i,o,r,a,t={},u=750;e(document).ready(function(){var T,d,y,m,h=0,w=0;"MSGesture"in window&&(a=new MSGesture,a.target=document.body),e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;n&&(t.el.trigger("swipe"),t.el.trigger("swipe"+n))}).on("touchstart MSPointerDown pointerdown",function(i){(!(m=g(i,"down"))||s(i))&&(y=m?i:i.touches[0],i.touches&&1===i.touches.length&&t.x2&&(t.x2=void 0,t.y2=void 0),T=Date.now(),d=T-(t.last||T),t.el=e("tagName"in y.target?y.target:y.target.parentNode),n&&clearTimeout(n),t.x1=y.pageX,t.y1=y.pageY,d>0&&250>=d&&(t.isDoubleTap=!0),t.last=T,r=setTimeout(c,u),a&&m&&a.addPointer(i.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(m=g(e,"move"))||s(e))&&(y=m?e:e.touches[0],f(),t.x2=y.pageX,t.y2=y.pageY,h+=Math.abs(t.x1-t.x2),w+=Math.abs(t.y1-t.y2))}).on("touchend MSPointerUp pointerup",function(r){(!(m=g(r,"up"))||s(r))&&(f(),t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?o=setTimeout(function(){t.el.trigger("swipe"),t.el.trigger("swipe"+l(t.x1,t.x2,t.y1,t.y2)),t={}},0):"last"in t&&(30>h&&30>w?i=setTimeout(function(){var i=e.Event("tap");i.cancelTouch=p,t.el.trigger(i),t.isDoubleTap?(t.el&&t.el.trigger("doubleTap"),t={}):n=setTimeout(function(){n=null,t.el&&t.el.trigger("singleTap"),t={}},250)},0):t={}),h=w=0)}).on("touchcancel MSPointerCancel pointercancel",p),e(window).on("scroll",p)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto);